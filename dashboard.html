<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Dashboard - Citriga</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header>
    <button id="menu-toggle">☰</button>
    <h1>Dashboard</h1>
  </header>

  <nav id="sidebar" class="hidden">
    <ul>
      <li><a href="index.html">Inicio</a></li>
      <li><a href="proveedores.html">Proveedores</a></li>
      <li><a href="clientes.html">Clientes</a></li>
      <li><a href="dashboard.html">Dashboard</a></li>
    </ul>
  </nav>

  <div id="overlay" class="hidden"></div>

  <main>
    <section>
      <h2>Resumen de contratos</h2>
      <div class="card">
        <p><strong>Contratos proveedores:</strong> <span id="totalProveedores">0</span></p>
        <p><strong>En recolección:</strong> <span id="recoleccion">0</span></p>
        <p><strong>Finalizados:</strong> <span id="finalizados">0</span></p>
      </div>

      <div class="card">
        <p><strong>Contratos de clientes:</strong> <span id="totalClientes">0</span></p>
        <p><strong>Abiertos:</strong> <span id="clientesAbiertos">0</span></p>
        <p><strong>Cerrados:</strong> <span id="clientesCerrados">0</span></p>
      </div>
    </section>

    <section>
      <h2>Próximamente: Kilos recolectados, gráficos y filtros</h2>
      <p>Esta sección mostrará kilos totales, por variedad y por proveedor/cliente.</p>
    </section>
  </main>

  <script>
    const toggle = document.getElementById("menu-toggle");
    const sidebar = document.getElementById("sidebar");
    const overlay = document.getElementById("overlay");

    toggle.addEventListener("click", () => {
      sidebar.classList.toggle("hidden");
      overlay.classList.toggle("hidden");
    });

    overlay.addEventListener("click", () => {
      sidebar.classList.add("hidden");
      overlay.classList.add("hidden");
    });

    // Simulación básica (cuando no se ha conectado aún a base de datos)
    let proveedores = JSON.parse(localStorage.getItem("proveedores") || "[]");
    let clientes = JSON.parse(localStorage.getItem("clientes") || "[]");

    document.getElementById("totalProveedores").textContent = proveedores.length;
    document.getElementById("recoleccion").textContent = proveedores.filter(p => p.estado === "recoleccion").length;
    document.getElementById("finalizados").textContent = proveedores.filter(p => p.estado === "fin").length;

    document.getElementById("totalClientes").textContent = clientes.length;
    document.getElementById("clientesAbiertos").textContent = clientes.filter(c => c.estado === "abierto").length;
    document.getElementById("clientesCerrados").textContent = clientes.filter(c => c.estado === "cerrado").length;
  </script>
</body>
</html>
